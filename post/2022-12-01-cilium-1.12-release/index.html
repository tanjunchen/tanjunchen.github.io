<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="漫步远方，心荡神往"><meta property="og:type" content="article"><meta property="og:image" content="https://tanjunchen.github.io/img/home.webp"><meta property="twitter:image" content="https://tanjunchen.github.io/img/home.webp"><meta name=title content="Cilium 1.12 GA：发布 Cilium Service Mesh 和企业级 Kubernetes 新功能"><meta property="og:title" content="Cilium 1.12 GA：发布 Cilium Service Mesh 和企业级 Kubernetes 新功能"><meta property="twitter:title" content="Cilium 1.12 GA：发布 Cilium Service Mesh 和企业级 Kubernetes 新功能"><meta name=description content="Cilium 是众所周知的云原生网络和安全公认的标准，被 Adobe、Bell Canada 和 IKEA 等公司以及许多提供托管 Kubernetes 平台（包括 Google Cloud 和 AWS 等）使用。Cilium 1.12 新版本中的主要功能由 Datadog、F5、Form3、Isovalent、Microsoft、Seznam.cz、纽约时报和许多其他贡献者提供。"><meta property="og:description" content="Cilium 是众所周知的云原生网络和安全公认的标准，被 Adobe、Bell Canada 和 IKEA 等公司以及许多提供托管 Kubernetes 平台（包括 Google Cloud 和 AWS 等）使用。Cilium 1.12 新版本中的主要功能由 Datadog、F5、Form3、Isovalent、Microsoft、Seznam.cz、纽约时报和许多其他贡献者提供。"><meta property="twitter:description" content="Cilium 是众所周知的云原生网络和安全公认的标准，被 Adobe、Bell Canada 和 IKEA 等公司以及许多提供托管 Kubernetes 平台（包括 Google Cloud 和 AWS 等）使用。Cilium 1.12 新版本中的主要功能由 Datadog、F5、Form3、Isovalent、Microsoft、Seznam.cz、纽约时报和许多其他贡献者提供。"><meta property="twitter:card" content="summary"><meta name=keyword content="陈谭军, 互联网, 云原生, 容器, 微服务, Web, PaaS, Istio, Kubernetes, Microservice"><link rel="shortcut icon" href=/img/favicon.ico><title>Cilium 1.12 GA：发布 Cilium Service Mesh 和企业级 Kubernetes 新功能 | 陈谭军的博客 | tanjunchen Blog</title><link rel=canonical href=/post/2022-12-01-cilium-1.12-release/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>漫步远方，心荡神往</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/technology/>technology</a></li><li><a href=/categories/think/>think</a></li><li><a href=/learning/>LEARNING</a></li><li><a href=/archive/>ARCHIVE</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/home.webp)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/cilium title=cilium>cilium</a>
<a class=tag href=/tags/kubernetes title=kubernetes>kubernetes</a>
<a class=tag href=/tags/cilium-mesh title="cilium mesh">cilium mesh</a></div><h1>Cilium 1.12 GA：发布 Cilium Service Mesh 和企业级 Kubernetes 新功能</h1><h2 class=subheading>Cilium 发布 Cilium 1.12 新版本</h2><span class=meta>Posted by
陈谭军
on
Thursday, December 1, 2022
<span id=busuanzi_container_page_pv>|<span id=busuanzi_value_page_pv></span><span>
<span id=/post/2022-12-01-cilium-1.12-release/ class="leancloud_visitors meta_data_item" data-flag-title><span class=post-meta-item-icon><span class="octicon octicon-eye"></span></span>
<i class="fa fa-eye"></i>
<span class=old-visitors-count style=display:none></span>
<span class=leancloud-visitors-count></span></span>
<script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script>
<script>AV.initialize("","")</script><script type=text/javascript>function showTime(e){var n=new AV.Query(e),t=[],s=$(".leancloud_visitors");s.each(function(){t.push($(this).attr("id").trim())}),n.containedIn("url",t),n.find().done(function(e){for(var s,o,i,a,r,c,l=".leancloud-visitors-count",d=".old-visitors-count",n=0;n<e.length;n++)a=e[n],i=a.get("url"),c=a.get("time"),s=document.getElementById(i),$(s).find(l).text(c);for(n=0;n<t.length;n++)i=t[n],s=document.getElementById(i),o=$(s).find(l),o.text()==""&&(r=$(s).find(d).text(),r!=""?o.text(0+parseInt(r)):o.text(0))}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var n=$(".leancloud_visitors"),t=n.attr("id").trim(),o=n.attr("data-flag-title").trim(),s=new AV.Query(e);s.equalTo("url",t),s.find({success:function(n){if(n.length>0){var s,i,r,c,l,a=n[0];a.fetchWhenSave(!0),a.increment("time"),a.save(null,{success:function(e){var n=$(document.getElementById(t));n.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else s=new e,i=new AV.ACL,i.setPublicReadAccess(!0),i.setPublicWriteAccess(!0),s.setACL(i),s.set("title",o),s.set("url",t),c=".old-visitors-count",l=$(document.getElementById(t)),r=l.find(c).text(),r!=""?s.set("time",parseInt(r)+1):s.set("time",1),s.save(null,{success:function(e){var n=$(document.getElementById(t));n.find(".leancloud-visitors-count").text(e.get("time"))},error:function(){console.log("Failed to create")}})},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");$(".leancloud_visitors").length==1?addCount(e):showTime(e)})</script>阅读 </span></span>|<span class=post-date>共 1211 字</span>，阅读约 <span class=more-meta>3 分钟</span></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h1 id=前言>前言</h1><p>随着 Cilium 1.12 新版本发布，Cilium 引入了 Cilium Service Mesh，它是服务网格类型中的新类型，它使企业能够灵活地在 sidecar 模型或无 sidecar 模型中运行服务网格，并可以选择不同控制平面。此外，该版本还引入了完全兼容 Kubernetes Ingress 控制器，直接集成到 Cilium 中控制器。</p><p><img src=/images/2022-12-01-cilium-1.12-release/1.png alt></p><h1 id=带有-sidecar-选项的-kubernetes-native-服务网格>带有 Sidecar 选项的 Kubernetes-Native 服务网格</h1><p>Cilium Service Mesh 的愿景是使用原生 Kubernetes 资源构建服务网格，就像 Cilium 的 ClusterMesh 使用 Kubernetes Services 和 NetworkPolicy 来执行多集群连接一样。今天，我们推出令人兴奋的新功能 Cilium Service Mesh，该功能可将 Cilium 作为服务网格模式运行，完全无需 sidecar，同时支持各种不同的控制平面。</p><p>为此，我们的目标是通过为用户引入选择项来降低服务网格层的复杂性和开销。用户可以根据自己的特有需求，根据最能满足其平台需求和要求，决定是否运行带有或不带有 sidecar 的服务网格。</p><p>Cilium 创建者、Isovalent 首席技术官兼联合创始人 Thomas Graf 说道：“Cilium Service Mesh 的关键在于选择”。企业希望能够选择 sidecar 或无 sidecar，并且他们想要一个由 eBPF 和 Envoy 提供支持的高性能数据平面，以便他们能够为自己的场景用例选择最佳的控制平面。通过将经过充分验证的 Envoy 代理与内核级 eBPF 技术相结合，Cilium Service Mesh 为企业提供了最佳的服务网格性能，同时还允许他们在 sidecar 或无 sidecar 模型之间进行选择。</p><p>随着 Cilium 1.12 版本的发布，Cilium Service Mesh 还引入了 CiliumEnvoyConfig (CEC) CRD，该 CRD 用于直接使用新的 Kubernetes 自定义资源 (CRD) 对高级 L7 策略进行 Envoy 代理配置，从而使所有用户都可以使用 Envoy 功能。在下一个版本中，Cilium Service Mesh 将增加对其他服务网格控制平面的支持，比如 Gateway API 及其兼容现有服务网格的 GAMMA。这将使 Cilium Service Mesh 数据平面与已迁移到 Gateway API 的 Istio 等服务网格兼容。</p><h1 id=cilium-112-其他新功能>Cilium 1.12 其他新功能</h1><p><img src=/images/2022-12-01-cilium-1.12-release/2.png alt></p><p>除了 Cilium Service Mesh 之外，Cilium 1.12 还提供了许多新功能和增强功能，如下所示：</p><ul><li><p>完全兼容的 Ingress Controller – 除了支持新的无 sidecar Service Mesh 选项外，Cilium 1.12 还提供直接嵌入到 Cilium 中的完全兼容 Kubernetes Ingress Controller 的选项。它由 Envoy 提供支持，并使用 eBPF 来保护它并提供其可见性。</p></li><li><p>ClusterMesh 增强功能，如 service affinity — 在 Cilium 1.12 中，ClusterMesh 可以将多个集群上运行的服务视为单个全局服务，并考虑关联性。通过 service affinity，如果多个集群中的 endpoints 可用，则可以将服务配置为首选本地或远程集群中的 endpoints。</p></li><li><p>Egress Gateway 和支持外部工作负载 - Egress Gateway 由 beta 版本升级为 stable。Cilium 通过特定网关节点将连接转发到外部旧的工作负载，并使用可预测的 IP 地址伪装它们，以允许与需要静态 IP 地址的旧式防火墙集成。Egress Gateway 与 ClusterMesh 结合使用时，外部工作负载可以支持传入网格中其他集群的请求。</p></li><li><p>发布 Cilium Tetragon — Cilium 的新 Tetragon 组件可实现强大的实时、基于 eBPF 的安全可观察性和运行时执行。Tetragon 检测能够对安全重要事件做出反应，例如流程执行事件、系统调用活动和 I/O 活动（包括网络和文件访问）。观看有关<a href="https://www.youtube.com/watch?v=1rpykZ8FUvs">Security Observability with eBPF and Tetragon</a>视频，了解更多信息。</p></li><li><p>其他 Cilium 增强与优化功能 — 额外的网络可见性控制、将 Cilium 作为非特权容器运行的能力、pod CIDR 的动态分配、IPv4/IPv6 NAT、AWS ENI 前缀委派等等。</p></li></ul><h1 id=参考>参考</h1><ol><li><a href=https://www.cncf.io/blog/2022/07/20/cilium-1-12-ga-cilium-service-mesh-and-other-major-new-features-for-enterprise-kubernetes/>cilium-1.12-released</a></li></ol><hr><ul class=pager><li class=previous><a href=/post/2022-10-28-istio-history/ data-toggle=tooltip data-placement=top title="说道说道 Istio">&larr;
Previous Post</a></li><li class=next><a href=/post/2023-01-01-chatgpt-article/ data-toggle=tooltip data-placement=top title=程序员技术：探索创新的编码之道>Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:tanjunchen20@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=/img/wechat.jpg><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-weixin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/tanjunchen><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 陈谭军 2023</p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,r=$(_containerSelector),a=r.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),a.each(function(){n=$(this).prop("tagName").toLowerCase(),i="#"+$(this).prop("id"),s=$(this).text(),t=$('<a href="'+i+'" rel="nofollow">'+s+"</a>"),o=$('<li class="'+n+'_nav"></li>').append(t),$(e).append(o)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>