<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="漫步远方，心荡神往"><meta property="og:type" content="article"><meta property="og:image" content="https://tanjunchen.github.io/img/home.webp"><meta property="twitter:image" content="https://tanjunchen.github.io/img/home.webp"><meta name=title content="istio 1.8.0 解读报告 - 用户至上"><meta property="og:title" content="istio 1.8.0 解读报告 - 用户至上"><meta property="twitter:title" content="istio 1.8.0 解读报告 - 用户至上"><meta name=description content="备注：Istio 1.8.0 支持的 Kubernetes 版本是 1.16、1.17、1.18 和 1.19（从 Istio 1.7 开始仅支持 Kubernetes 1.16+ 版本）"><meta property="og:description" content="备注：Istio 1.8.0 支持的 Kubernetes 版本是 1.16、1.17、1.18 和 1.19（从 Istio 1.7 开始仅支持 Kubernetes 1.16+ 版本）"><meta property="twitter:description" content="备注：Istio 1.8.0 支持的 Kubernetes 版本是 1.16、1.17、1.18 和 1.19（从 Istio 1.7 开始仅支持 Kubernetes 1.16+ 版本）"><meta property="twitter:card" content="summary"><meta name=keyword content="陈谭军, 互联网, 云原生, 容器, 微服务, Web, PaaS, Istio, Kubernetes, Microservice"><link rel="shortcut icon" href=/img/favicon.ico><title>istio 1.8.0 解读报告 - 用户至上 | 陈谭军的博客 | tanjunchen Blog</title><link rel=canonical href=/post/2020-11-19-istio-1.8/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>漫步远方，心荡神往</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/technology/>technology</a></li><li><a href=/categories/think/>think</a></li><li><a href=/learning/>LEARNING</a></li><li><a href=/archive/>ARCHIVE</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/home.webp)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/istio title=istio>istio</a></div><h1>istio 1.8.0 解读报告 - 用户至上</h1><h2 class=subheading></h2><span class=meta>Posted by
陈谭军
on
Thursday, November 19, 2020
<span id=busuanzi_container_page_pv>|<span id=busuanzi_value_page_pv></span><span>
<span id=/post/2020-11-19-istio-1.8/ class="leancloud_visitors meta_data_item" data-flag-title><span class=post-meta-item-icon><span class="octicon octicon-eye"></span></span>
<i class="fa fa-eye"></i>
<span class=old-visitors-count style=display:none></span>
<span class=leancloud-visitors-count></span></span>
<script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script>
<script>AV.initialize("","")</script><script type=text/javascript>function showTime(e){var n=new AV.Query(e),t=[],s=$(".leancloud_visitors");s.each(function(){t.push($(this).attr("id").trim())}),n.containedIn("url",t),n.find().done(function(e){for(var s,o,i,a,r,c,l=".leancloud-visitors-count",d=".old-visitors-count",n=0;n<e.length;n++)a=e[n],i=a.get("url"),c=a.get("time"),s=document.getElementById(i),$(s).find(l).text(c);for(n=0;n<t.length;n++)i=t[n],s=document.getElementById(i),o=$(s).find(l),o.text()==""&&(r=$(s).find(d).text(),r!=""?o.text(0+parseInt(r)):o.text(0))}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var n=$(".leancloud_visitors"),t=n.attr("id").trim(),o=n.attr("data-flag-title").trim(),s=new AV.Query(e);s.equalTo("url",t),s.find({success:function(n){if(n.length>0){var s,i,r,c,l,a=n[0];a.fetchWhenSave(!0),a.increment("time"),a.save(null,{success:function(e){var n=$(document.getElementById(t));n.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else s=new e,i=new AV.ACL,i.setPublicReadAccess(!0),i.setPublicWriteAccess(!0),s.setACL(i),s.set("title",o),s.set("url",t),c=".old-visitors-count",l=$(document.getElementById(t)),r=l.find(c).text(),r!=""?s.set("time",parseInt(r)+1):s.set("time",1),s.save(null,{success:function(e){var n=$(document.getElementById(t));n.find(".leancloud-visitors-count").text(e.get("time"))},error:function(){console.log("Failed to create")}})},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");$(".leancloud_visitors").length==1?addCount(e):showTime(e)})</script>阅读 </span></span>|<span class=post-date>共 4881 字</span>，阅读约 <span class=more-meta>10 分钟</span></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><p>备注：Istio 1.8.0 支持的 Kubernetes 版本是 1.16、1.17、1.18 和 1.19(从 Istio 1.7 开始仅支持 Kubernetes 1.16+ 版本)。</p><h1 id=istio-18-解读---用户至上>Istio 1.8 解读 - 用户至上</h1><h2 id=安装与升级>安装与升级</h2><p>Istio 1.8 开始使用 Helm 3 进行安装和升级(响应用户的号召)，Istio 从 1.5 版本开始弃用 Helm，安装方式：Helm -> istioctl manifest -> istioctl install(未来可能会被废弃)、Istio Operator (最终的安装方式)。具体详见<a href=https://istio.io/latest/faq/setup/#install-method-selection>install-method-selection</a>。</p><h2 id=跨集群>跨集群</h2><p>简单易化 Kubernetes 安装多个 Istio 集群。详见<a href=https://istio.io/latest/docs/setup/install/multicluster/>multicluster</a>。目前我觉得还是单个 Kubernetes 对应于单个 Istio 集群合理些。跨集群服务与下文所提的 Smart DNS Proxy 有一定的联系。</p><h2 id=虚拟机应用>虚拟机应用</h2><p>Istio网格如果需要注册VM 服务，到目前为止，唯一的方法是手动创建WorkloadEntry资源。但是在自动扩展VM的情况下，这可能会引起问题，在这种情况下，自动注册新VM并不容易。有一个Alpha功能可以解决此问题，从而可以自动注册VM。这由新的WorkloadGroup API资源完成，该资源负责在有新VM可用时自动创建WorkloadEntry资源。Istio 1.8版本为围绕VM支持的各种功能奠定了基础，随着它的成熟，在将来的版本中应该会变得显而易见。WorkloadGroup 是一个新的 API 对象，旨在与虚拟机等非 Kubernetes 工作负载一起使用，模仿现有的用于 Kubernetes 工作负载的 sidecar 注入和部署规范模型来引导 Istio 代理。</p><h2 id=安全与证书>安全与证书</h2><p>通过 K8s CSR API 集成外部 CAs，从Kubernetes 1.18开始，具有CSR API功能，该功能可自动执行来自证书颁发机构(CA)的证书请求。在Istio 1.8中，添加了实验性支持，以允许Istio使用Kubernetes CSR API与外部CA集成。此功能只是为使用外部CA奠定了必要的基础，现在仅支持istiod（并有些支持Google CA），但是随着该功能在Istio和Kubernetes方面都日趋成熟，将来的版本中应该会引入新的实现。</p><h2 id=易用性>易用性</h2><ol><li>新增了istioctl bug-report 命令，用来收集调试信息和获取集群状态。推荐使用istioctl analyze 分析 Istio 资源配置的合法性。</li><li>安装 add-on 方式产生变化，在 Istio 1.7 中已经不推荐使用 istioctl 来安装，在 1.8 中直接被移除，这样有利于解决 add-on 落后于上游及难以维护的问题。如 Grafana、Prometheus、Zipkin、 Jaeger、Kiali等。详见 <a href=https://istio.io/latest/blog/2020/addon-rework/>https://istio.io/latest/blog/2020/addon-rework/</a> 。目前都是推荐在 Kubernetes 集群中创建ADD-ON组件服务。</li><li>正式移除 Mixer，现在官方推荐使用 WebAssembly 通过扩展 Envoy 来扩展 Istio。有关WebAssembly 详见 <a href=https://istio.io/latest/blog/2020/wasm-announce/>https://istio.io/latest/blog/2020/wasm-announce/</a> 。</li><li>新增了Smart DNS Proxying，智能 DNS 域名解析代理。主要应用场景适用于 VM、外部服务、跨集群应用。详见 <a href=https://istio.io/latest/blog/2020/dns-proxy/>https://istio.io/latest/blog/2020/dns-proxy/</a>。</li></ol><p>Smart DNS proxying 新的 DNS 解析。Kubernetes集群外的VM可能难以提供DNS解析来路由集群内的服务，如果服务没有唯一的虚拟IP且同一端口（例如数据库），则DNS服务器无法区分它们在多集群网格中，我们无法解析另一个集群上的服务的IP地址（这就是为什么在远程集群上同样创建存根服务的原因）为了解决Istio 1.8的所有这些问题，在Istio sidecar代理中实现了一个用GO编写的DNS代理。此DNS代理由Istiod（基于集群上的服务和ServiceEntries）动态更新，并充当缓存。它将尝试根据其缓存解析所需的主机名，并且仅在缓存未注册主机名时才转向外部DNS服务器。弃用Istio CoreDNS Plugin，Istio1.8默认没有开启。</p><h2 id=其他>其他</h2><h3 id=inbound-cluster-name-名称格式>Inbound cluster name 名称格式</h3><p>Envoy Inbound 流量格式类似于：inbound|&lt;service_port_number>|&lt;service_port_name>|&lt;service_hostname>
例如：inbound|80|http|httpbin.default.svc.cluster.local。从Istio 1.8 开始，该格式已经变更。服务端口名和服务的主机名现在被丢弃。</p><p>新的格式类似于：inbound|&lt;service_port_number>||</p><p>例如： inbound|80||</p><p>当多个服务在同一Pod中选择相同的容器端口时会出现问题。官方的发行版本中提到：&ldquo;对于大多数用户，这是一个实现细节，只会影响直接与Envoy配置进行交互的调试或工具。"。到目前为止，当有两个服务使用相同的服务端口号并选择同一个Pod，但它们目的端口号不同时，此更改会导致不可预期行为。</p><h3 id=默认禁用-protocol-detection-timeout>默认禁用 Protocol detection timeout</h3><p>以前，Istio引入了某些“服务器优先”协议（例如MySQL使用的协议）的检测超时，该超时在没有初始流量要嗅探时触发。默认情况下，已禁用此协议检测超时，以避免在连接速度慢或某些情况下潜在的流量故障。</p><h3 id=authorizationpolicy-新增-remoteipblocksnotremoteipblocks-字段>AuthorizationPolicy 新增 remoteIpBlocks/notRemoteIpBlocks 字段</h3><p>新增的remoteIpBlocks/notRemoteIpBlocks字段被用于根据请求的原始源IP(从
X-Forwarded-ForHeader或代理协议获取)允许/拒绝请求。现在，AuthorizationPolicy资源上的ipBlocks/notIpBlocks字段用于基于到达Sidecar的IP数据包的源地址来允许/拒绝请求。如果你希望基于请求的原始源IP地址来允许/拒绝请求(使用X-Forwarded-For或代理协议），请更新AuthorizationPolicy资源以使用新的remoteIpBlocks/notRemoteIpBlocks字段，而不是ipBlocks/notIpBlocks字段。</p><h3 id=默认强制-trust-domain-validation>默认强制 Trust Domain Validation</h3><p>默认情况下，如果请求既不是来自同一信任域，也不是来自TrustDomainAliases列表，则“信任域验证”功能将拒绝对Sidecar的任何传入请求。如果要允许来自Istio 1.8上不同信任域的流量进入网格，则需要将其添加到TrustDomainAliases列表中，否则将被拒绝。</p><h3 id=envoy-filter-功能增强>Envoy filter 功能增强</h3><p>对于EnvoyFilter API，建议您使用新的Envoy过滤器名称，因为某些过滤器名称已被弃用，并将在以后的版本中删除。为了指定Envoy配置的HTTP_ROUTE规范的顺序，新的INSERT_FIRST，INSERT_BEFORE，INSERT_AFTER操作已添加到EnvoyFilter API。为了能够覆盖HTTP和网络过滤器，在EnvoyFilter API中添加了新的REPLACE操作。</p><h3 id=新特性>新特性</h3><p>以前，网关从Kubernetes secret 读取证书进行外部通信。这些网关通常是面向公众的实体，如果遭到攻击，则可能导致整个集群的Kubernetes secret中的证书泄漏。在Istio 1.8中，网关从Istiod获取证书。他们甚至没有特权来从集群中读取secret，以减少潜在的损害。此功能很有趣，因为它为我们提供了一种途径，使我们能够在将来的版本中从外部secret存储区（例如，保管库或云密钥存储区）中获取证书，这对于已经使用其他秘密存储区的许多Istio用户来说很方便。此外，这是完全向后兼容的更改，不需要任何用户交互。</p><h2 id=总结>总结</h2><p>Istio 1.8大大提高了操作稳定性，也为将来版本中令人兴奋的新功能奠定了基础。废弃 Istio CoreDNS，使用新的智能DNS解析、支持在线安装Istio 1.8 新版本、增强虚拟机服务(使用新的WorkloadGroup)等是需要重点关注的方向。</p><h2 id=对比>对比</h2><table><thead><tr><th>功能</th><th>Istio 1.6.0</th><th>Istio 1.7.6</th><th>Istio 1.8.1</th></tr></thead><tbody><tr><td>安装</td><td>1. 新增安装金丝雀升级(控制面与数据面)</br>2. 移除Helm charts</br>3. 为Istiod 添加 hostname 功能</br>4. Gateway 健康检查端口从 15020 改成 15021</br>5. 新增保存安装配置功能</br>6. 支持安装命名空间可变性</br>7. Citadel、Sidecar Injector、Galley Deployment正式被移除，功能全部被移到 Istiod 8. 移除 istio-pilot 配置</br>9. Ingressgateway 15029-15032 端口被移除，推荐使用遥测插件去收集数据</br>10. Gateway、VirtualServices、 mTLS 在 Istio 安装配置中被移除</br>11. 新增 preview 特性，WASM 实验特性</br>12. istioctl install 安装命令替换 istioctl manifest apply 命令</br>13. 新增允许用户尝试实验性使用管理远程数据平面的集中式Istiod。</td><td>1. 新增用于在VM上运行Istio sidecar的RPM软件包。</br>2. 新增实验特性外部Istiod支持</br>3. 修复了无法将NodePort服务用作meshNetworks中的注册表服务名称(registryServiceName)的bug</br>4. gateway deployments/operator/Istiod 默认改用非 root 用户</br>5. 升级 CRD 与 WebHook v1betav1版本到 v1</td><td>1. 提升外部控制面安装提升到 alpha 功能</br>2. 升级 kiali 到1.26</br>3. 修改 sidecar 注入 securityPolicy.fsGroup(Kubernetes 1.19+支持)</br>4. 弃用 values.global.meshExpansion.enabled(VM 使用)，转而使用 values.gateways.istio-ingressgateway.meshExpansionPorts。</br>5. 弃用 istioctl 安装第三方遥测功能。Prometheus、 Grafana、Zipkin、Jaeger、Kiali</td></tr><tr><td>流量管理</td><td>1. 新增VS delegation</br>2. 新增Workload Entry,主要针对的是 VM 功能</br>3. 新增gateway网关拓扑配置</br>4. 新增对 Kubernetes Service APIs 的实验性特性</br>5. 新增对 appProtocol 的端口协议支持(Kubernetes 1.18+)</br>6. 默认启用 Gateway SDS 功能</br>7. 新增从Secrets、pathType、and IngressClass读取证书，对 k8s Ingress 有更好的支持</br>8. 新增 proxy.istio.io/config 注解对于每一个 Pod</br>9. 移除很多的proxy环境变量与改变健康检查端口 15021</td><td>1. 流量治理参数 values.global.proxy.holdApplicationUntilProxyStarts 默认被禁用</br>2. 为使用DestinationRule的Egress Gateway从TLS/mTLS发起的客户端证书和CA证书添加了SDS支持</td><td>1. 在 istio-agent中默认为VM新增DNS 嗅探，istioctl x workload entry configure</br>2. 为了指定Envoy配置的HTTP_ROUTE规范的顺序，新的INSERT_FIRST，INSERT_BEFORE，INSERT_AFTER操作已添加到EnvoyFilter API。为了能够覆盖HTTP和网络过滤器，在EnvoyFilter API中添加了新的REPLACE操作。</br>3. 新增Istio resource 资源状态</br>4. 当Node节点具有多个IP地址（例如，扩展场景中的VM）时，Istio Proxy现在会将inbound listener绑定到列表中的第一个适用地址（新行为），而不是最后一个（以前的行为）</br>5. 网关从Istiod获取证书。如果必要可以设置 ISTIOD_ENABLE_SDS_SERVER=false</td></tr><tr><td>安全</td><td>1. Istio Agent 新增JWT，拥有更好的SDS功能</br>2. 修改Istio Agent 证书grace period calculation bug</br>3. 移除Security alpha API</td><td>1. Trust Domain 验证也可以验证TCP流量，以前仅验证HTTP流量</br>2. stio网关允许在服务器的TLS模式为ISTIO_MUTUAL时使用基于source principal的授权</br>3. 提升VM 的安全性</td><td>1. 基于请求的原始源IP地址来允许/拒绝请求使用X-Forwarded-For或代理协议请更新AuthorizationPolicy资源以使用新的 remoteIpBlocks/notRemoteIpBlocks</br>2. AuthorizationPolicy 支持嵌套的jwt 功能、AUDIT 审计功能。备注：不用使用 remoteIpBlocks、remote_ip(对于非http协议),等待新的release发布。</td></tr><tr><td>遥测</td><td>1. 新增实验特性 request classification filters、mesh-wide tracing configuration API sampling 影响采样率的相关设置</br>2. 向代理 proxy 和控制平面工作负载添加了标准的Prometheus抓取注解</br>3. 更新 Grafana Dashboard 适配新的 Istiod</br>4. 更新默认遥测telemetry v2配置，以避免使用主机Header在网关上提取目标服务名称。</td><td>1. Istio Agent 添加 prometheus指标</br>2. Stackdriver 添加TCP Metrics 和Access Logs</br>3. 默认开启prometheus metrics merging 指标</br>4. 移除 istiod 等指标</td><td>1. Control Plane Dashboard 和 Performance Dashboard使用 container_memory_working_set_bytes 指标可视化内存</br>2. 对于Grafana 新增 datasource 参数</br>3. 当Envoy中设置了ResponseFlag，新增Listener Access Logs</br>4. 新增对OpenCensusAgent格式的 Trace Export的支持，并带有可配置的跟踪上下文Header</br>5. 新增代理配置用于控制Envoy统计信息的生成</br>6. 对于 Grafana新增 Istio Wasm Extension</br>7. 对于 prometheus新增proxy grpcistio_request_messages_total、istio_response_messages_total 指标</br>8. 正式已移除Mixer 相关特性与功能</td></tr></tbody></table><h2 id=参考>参考</h2><ol><li><a href=https://istio.io/latest/news/releases/1.8.x/announcing-1.8/>https://istio.io/latest/news/releases/1.8.x/announcing-1.8/</a></li><li><a href="https://banzaicloud.com/blog/istio-1.8/?utm_campaign=backyards-try&utm_content=147132245&utm_medium=social&utm_source=twitter&hss_channel=tw-927148627017060352#inbound-cluster-name">https://banzaicloud.com/blog/istio-1.8/?utm_campaign=backyards-try&utm_content=147132245&utm_medium=social&utm_source=twitter&hss_channel=tw-927148627017060352#inbound-cluster-name</a></li></ol><hr><ul class=pager><li class=previous><a href=/post/2020-10-12-talk-about-kubernetes/ data-toggle=tooltip data-placement=top title="浅谈 Kubernetes">&larr;
Previous Post</a></li><li class=next><a href=/post/2020-11-30-istio-support-vm/ data-toggle=tooltip data-placement=top title="istio 1.8.0 支持 VM 虚拟机验证">Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:tanjunchen20@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=/img/wechat.jpg><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-weixin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/tanjunchen><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 陈谭军 2023</p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,r=$(_containerSelector),a=r.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),a.each(function(){n=$(this).prop("tagName").toLowerCase(),i="#"+$(this).prop("id"),s=$(this).text(),t=$('<a href="'+i+'" rel="nofollow">'+s+"</a>"),o=$('<li class="'+n+'_nav"></li>').append(t),$(e).append(o)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>